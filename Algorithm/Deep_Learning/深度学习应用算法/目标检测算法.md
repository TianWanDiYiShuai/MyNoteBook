# 第二部分：目标检测算法

## 1、简介

目标检测\(object detection\)是计算机视觉中非常具有挑战性的一项工作，一方面它是其他很多后续视觉任务的基础，另一方面目标检测不仅需要预测区域，还要进行分类，因此问题更加复杂。

**目标检测算法可以分为两条主线**

* 基于候选区\(region proposal\)的方法，即通过某种策略选出一部分候选框再进行后续处理，比如RCNN-SPP-Fast RCNN-Faster RCNN-RFCN等
* 端对端的方法，直接使用卷积神经网络将图像变换到一个小的尺度，在新的尺度上使用anchor box来预测目标区域，这一类方法包括SSD以及Yolo的各个版本等

## 2、目标检测的评价指标

准确率 （Accuracy），混淆矩阵 （Confusion Matrix），精确率（Precision），召回率（Recall），平均正确率（AP），mean Average Precision\(mAP\)，交除并（IoU），ROC + AUC，非极大值抑制（NMS）。

### 2.1、**混淆矩阵 （Confusion Matrix）**

我们通过样本的采集，能够直接知道真实情况下，哪些数据结果是positive，哪些结果是negative。同时，我们通过用样本数据跑出分类型模型的结果，也可以知道模型认为这些数据哪些是（正样本）positive，哪些是（负样本）negative。

![](/Image/算法/深度学习/深度学习应用算法/混淆矩阵.jpg)

#### 2.1.1、一级指标

因此，我们就能得到这样四个基础指标，我称他们是一级指标（最底层的）：

* 真实值是positive，模型认为是positive的数量（True Positive=TP）
* 真实值是positive，模型认为是negative的数量（False Negative=FN）：这就是统计学上的第一类错误（Type I Error）
* 真实值是negative，模型认为是positive的数量（False Positive=FP）：这就是统计学上的第二类错误（Type II Error）
* 真实值是negative，模型认为是negative的数量（True Negative=TN）

  预测性分类模型，肯定是希望越准越好。那么，对应到混淆矩阵中，那肯定是希望TP与TN的数量大，而FP与FN的数量小。所以当我们得到了模型的混淆矩阵后，就需要去看有多少观测值在第二、四象限对应的位置，这里的数值越多越好；反之，在第一、三四象限对应位置出现的观测值肯定是越少越好。

#### 2.1.2、二级指标

  当面对大量的数据，光凭算个数，很难衡量模型的优劣。因此混淆矩阵在基本的统计结果上又延伸了如下4个指标，我称他们是二级指标（通过最底层指标加减乘除得到的）：

* 准确率（Accuracy）—— 针对整个模型
* 精确率（Precision）
* 灵敏度（Sensitivity）：就是召回率（Recall）
* 特异度（Specificity）

![](/Image/算法/深度学习/深度学习应用算法/二级指标.jpg)

通过上面的四个二级指标，可以将混淆矩阵中数量的结果转化为0-1之间的比率。便于进行标准化的衡量。

#### 2.1.3、三级指标

在这四个指标的基础上在进行拓展，会产令另外一个三级指标这个，指标叫做F1 Score。他的计算公式是：


$$
F = \frac{（1+\alpha）PR}{\alpha（P+R）}
$$


当\`&\alpha&\`

### 2.3、**精确率（Precision）与召回率（Recall）**

### 2.4、**平均精度（Average-Precision，AP）与** **mean Average Precision\(mAP\)**

### 2.5、**IoU**

### 2.6、**ROC（Receiver Operating Characteristic）曲线与AUC（Area Under Curve）**

### 2.7、**PR曲线和ROC曲线比较**

### 2.8、**非极大值抑制（NMS）**



